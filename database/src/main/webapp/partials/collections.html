<div class="page-header">
    <h2>Collections</h2>
</div>

<div class="row">
    <div class="col-md-12">

        <div id="accordion2" class="panel-group">
            <div class="alert alert-error" ng-show="msg.error">
                {{msg.message}}
            </div>
            <div class="alert alert-success" ng-show="msg.success">
                {{msg.message}}
            </div>
            <div class="panel panel-default" ng-repeat="collection in collections">
                <div class="panel-heading">
                    <div class="accordion-toggle">
                        <a href="#{{collection.collapseId}}" data-parent="#accordion2" data-toggle="collapse">
                            <strong>{{collection.name}}</strong>
                        </a>
                        <div style="font-size: smaller;">{{collection.formatedCompressedSize}} compressed data - {{collection.formatedUncompressedSize}} uncompressed data - {{collection.formatedIndexSize}} index</div>
                    </div>
                </div>
                <div class="panel-collapse" id="{{collection.collapseId}}" style="height: 0px;">
                    <div class="panel-body">
                        <div ng-repeat="chunk in collection.chunks">
                            <h4>Delivery Chunk {{chunk.key}}</h4>
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Version / Info</th>
                                    <th>Date</th>
                                    <th>Compressed</th>
                                    <th>Uncompressed</th>
                                    <th>Index</th>
                                    <th>&nbsp;</th>
                                    <th>&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="version in chunk.versions">
                                    <td>
                                        <strong><small>{{version.version}}</small></strong>
                                        <p>{{version.info}}</p>
                                    </td>
                                    <td>{{version.date}}</td>
                                    <td>{{version.formatedCompressedSize}}</td>
                                    <td>{{version.formatedUncompressedSize}}</td>
                                    <td>{{version.formatedIndexSize}}</td>
                                    <td>
                                        <span class="label label-success" ng-show="version.active">Running</span>
                                        <button class="btn btn-default" ng-click="activateChunkedVersionInCollection(collection.name, chunk.key, version.version)" ng-hide="version.active" href=""><i class="glyphicon glyphicon-hand-right"></i> Activate</button>
                                    </td>
                                    <td><button class="btn btn-danger" ng-click="deleteChunkedVersionInCollection(collection.name, chunk.key, version.version)"><i class="glyphicon glyphicon-trash"></i></button></td>

                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td><strong>{{chunk.formatedCompressedSize}}</strong></td>
                                    <td><strong>{{chunk.formatedUncompressedSize}}</strong></td>
                                    <td><strong>{{chunk.formatedIndexSize}}</strong></td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                </tr>
                                </tbody>
                            </table>
                            <button class="btn btn-danger" ng-click="deleteCompleteCollection(collection.name)"><i class="icon-trash icon-white"></i> Delete collection <strong>{{collection.name}}</strong></button>
                            <hr/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>